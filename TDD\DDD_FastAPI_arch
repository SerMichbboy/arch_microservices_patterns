app/
├── main.py                       # Точка входа (FastAPI, подключение роутеров)
│
├── api/                          # Внешний слой (контракты: request/response)
│   ├── v1/
│   │   ├── endpoints/            # эндпоинты (users.py, auth.py и т.п.)
│   │   └── schemas/              # Pydantic DTO
│   └── deps.py                   # Depends (в т.ч. сервисы Redis/Kafka)
│
├── core/                         # ядро (конфиги, middleware, DI)
│   ├── config.py
│   └── security.py
│
├── domain/                       # бизнес-домены
│   └── users/
│       ├── entities.py
│       ├── services.py
│       └── exceptions.py
│
├── infrastructure/               # инфраструктура
│   ├── db/                       # PostgreSQL
│   │   ├── base.py
│   │   ├── session.py
│   │   └── repositories.py
│   │
│   ├── redis/                    # Redis client
│   │   ├── client.py             # инициализация Redis
│   │   └── cache_service.py      # сервис кеширования (UserCacheService)
│   │
│   ├── kafka/                    # Kafka producer/consumer
│   │   ├── producer.py
│   │   ├── consumer.py
│   │   └── events_service.py     # сервис для работы с событиями (EventService)
│   │
│   └── email/                    
│       └── sender.py             # пример внешнего SMTP
│
└── tests/
    ├── unit/                     # чистая бизнес-логика
    │   └── test_user_service.py
    ├── integration/              # Redis, Kafka, API
    │   ├── test_user_api.py
    │   ├── test_cache_service.py
    │   └── test_kafka_service.py
    └── e2e/                      # сценарии пользователя
        └── test_register_login.py
